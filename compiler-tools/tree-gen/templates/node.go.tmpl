// Copyright (c) 2025, WSO2 LLC. (http://www.wso2.com).
//
// WSO2 LLC. licenses this file to you under the Apache License,
// Version 2.0 (the "License"); you may not use this file except
// in compliance with the License.
// You may obtain a copy of the License at
//
// http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing,
// software distributed under the License is distributed on an
// "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
// KIND, either express or implied.  See the License for the
// specific language governing permissions and limitations
// under the License.
//

package tree

import (
    "ballerina-lang-go/parser/common"
)

{{range .Nodes}}
{{if .IsAbstract}}
type {{.Name}} = {{if .Base}}{{if eq .Base "Node"}}NonTerminalNode{{else}}{{.Base}}{{end}}{{else}}NonTerminalNode{{end}}

{{else}}
type {{.Name}} struct {
    {{if .Base}}{{if eq .Base "Node"}}NonTerminalNode{{else}}{{.Base}}{{end}}{{else}}NonTerminalNode{{end}}
}
{{if .Kind}}

func (n {{.Name}}) Kind() common.SyntaxKind {
    return common.{{.Kind}}
}
{{end}}
{{$nodeName := .Name}}
{{range $index, $attr := .Attributes}}
{{if or (eq $attr.Occurrences "MULTIPLE") (eq $attr.Occurrences "MULTIPLE_SEPARATED")}}

func (n {{$nodeName}}) {{title $attr.Name}}() NodeList[{{if eq $attr.Type "Node"}}Node{{else}}*{{$attr.Type}}{{end}}] {
    return nodeListFrom[{{if eq $attr.Type "Node"}}Node{{else}}*{{$attr.Type}}{{end}}](into[*NonTerminalNode](n.ChildInBucket({{$index}})))
}
{{else}}

func (n {{$nodeName}}) {{title $attr.Name}}() {{if eq $attr.Type "Node"}}Node{{else}}*{{$attr.Type}}{{end}} {
    val, ok := n.ChildInBucket({{$index}}).({{if eq $attr.Type "Node"}}Node{{else}}*{{$attr.Type}}{{end}})
    if !ok {
        panic("expected {{$attr.Type}}")
    }
    return val
}
{{end}}
{{end}}
{{end}}
{{end}}
